# 时间轴功能说明

## 📋 功能概览

时间轴功能为农情遥感系统大屏提供了按月份的时间节点切换功能，用户可以通过点击不同月份查看对应时间段的数据变化，实现历史数据回顾和趋势分析。

## 🎯 核心功能

### 1. 月份时间节点
- **12个月份节点**: 1月到12月的完整时间轴
- **当前月份高亮**: 自动高亮当前月份
- **点击切换**: 点击任意月份节点切换数据
- **键盘操作**: 支持左右箭头键切换月份

### 2. 数据联动更新
- **图表数据**: 切换月份时所有图表数据自动更新
- **长势分析**: 根据季节性变化调整长势分类数据
- **环境监测**: 温度、湿度、降雨等环境数据按月变化
- **作物分布**: 不同月份的作物种植面积数据

### 3. 视觉反馈
- **进度条**: 显示当前月份在全年中的进度
- **动画效果**: 平滑的切换动画和高亮效果
- **数据变化提示**: 切换月份时显示通知消息
- **季节性颜色**: 根据季节调整视觉效果

### 4. 简洁设计
- **纯净界面**: 移除了自动播放和重置按钮，界面更加简洁
- **毛玻璃效果**: 采用灰色毛玻璃背景，符合现代UI设计
- **手动控制**: 专注于手动点击切换，操作更直观

## 🎮 使用方法

### 1. 基本操作
- **点击月份**: 直接点击任意月份节点切换数据
- **键盘操作**: 使用左右箭头键快速切换月份
- **鼠标悬浮**: 悬浮在月份节点上查看提示信息

### 2. 简洁操作
- 界面更加简洁，专注于核心功能
- 只显示年份标识，无多余控制按钮
- 操作更直观，点击即可切换

## 📊 数据变化规律

### 1. 季节性长势变化
- **春季(3-5月)**: 长势逐渐好转，优等比例增加
- **夏季(6-8月)**: 长势最佳，优等比例最高
- **秋季(9-11月)**: 长势稳定，各等级比例平衡
- **冬季(12-2月)**: 长势较差，差等比例增加

### 2. 环境数据变化
- **温度**: 1月最低(约17°C)，7月最高(约29°C)
- **湿度**: 随月份递增，12月最高
- **降雨**: 夏季最多，冬季最少
- **日照**: 呈正弦波变化，夏季最长

### 3. 作物分布变化
- **小麦**: 春夏季面积增加
- **玉米**: 夏秋季面积最大
- **水稻**: 夏季达到峰值
- **大豆**: 秋季收获期面积稳定

## 🎨 视觉设计

### 1. 时间轴样式
- **位置**: 页面底部固定定位
- **背景**: 灰色毛玻璃效果，现代简约风格
- **边距**: 右侧留出280px避免覆盖面板
- **高度**: 紧凑设计，不占用过多空间
- **颜色方案**: 灰白色调，符合专业UI设计

### 2. 月份节点
- **正常状态**: 白色半透明圆点，灰色标签
- **悬浮状态**: 白色高亮，标签变亮
- **激活状态**: 纯白色圆点，脉冲动画
- **数据指示**: 橙色小点表示有数据

### 3. 进度条
- **颜色**: 白色渐变(#FFFFFF → #E0E0E0)
- **长度**: 根据当前月份动态调整
- **限制**: 最大95%宽度，避免超出容器
- **动画**: 平滑过渡效果

### 4. 当前时间指示器
- **样式**: 发光圆形指示器
- **位置**: 跟随进度条移动
- **动画**: 持续发光效果
- **颜色**: 白色径向渐变

## 🔧 技术实现

### 1. 核心文件
- `assets/css/timeline.css` - 时间轴样式
- `assets/js/timeline.js` - 时间轴功能逻辑

### 2. 主要函数
```javascript
// 初始化时间轴
window.Timeline.init()

// 选择月份
window.Timeline.selectMonth(month)

// 获取当前月份
window.Timeline.getCurrentMonth()

// 自动播放控制
window.Timeline.toggleAutoPlay()

// 重置时间轴
window.Timeline.resetTimeline()
```

### 3. 数据更新机制
```javascript
// 月份变更事件
function onMonthChanged(newMonth, previousMonth) {
    // 触发各种数据更新
    updateDataForMonth(newMonth);
    updateChartsForMonth(newMonth);
    updateTownshipDataForMonth(newMonth);
}

// 季节性数据调整
function getSeasonalFactor(month) {
    // 返回季节性调整因子
    // 用于模拟真实的季节性变化
}
```

### 4. 响应式适配
- **1920×1080**: 完整显示，280px右边距
- **1366×768**: 调整为250px右边距
- **1024×768**: 调整为200px右边距

## 🚀 扩展功能

### 已实现功能
- ✅ 12个月份时间节点
- ✅ 点击切换月份
- ✅ 键盘快捷键操作
- ✅ 自动播放功能
- ✅ 数据联动更新
- ✅ 季节性数据变化
- ✅ 进度条显示
- ✅ 动画效果
- ✅ 响应式设计

### 可扩展功能
- 🔄 年份切换功能
- 🔄 季度视图模式
- 🔄 自定义播放速度
- 🔄 数据导出功能
- 🔄 历史对比功能
- 🔄 预测数据显示

## 📱 兼容性

### 浏览器支持
- ✅ Chrome 80+
- ✅ Firefox 75+
- ✅ Safari 13+
- ✅ Edge 80+

### 分辨率支持
- ✅ 1920×1080 (推荐)
- ✅ 1366×768
- ✅ 1024×768

## 🐛 故障排除

### 常见问题

**问题**: 时间轴不显示
**解决**: 检查CSS文件是否正确加载，确保timeline.css已引入

**问题**: 点击月份无反应
**解决**: 检查JavaScript文件加载顺序，确保timeline.js在main.js之前加载

**问题**: 数据不更新
**解决**: 检查数据更新函数是否正确定义，查看控制台错误信息

**问题**: 进度条位置不正确
**解决**: 检查CSS中的边距设置，确保右侧面板宽度匹配

### 调试方法
```javascript
// 检查时间轴状态
console.log('当前月份:', window.Timeline.getCurrentMonth());

// 检查月份配置
console.log('月份配置:', window.Timeline.getMonthConfig(6));

// 手动触发月份切换
window.Timeline.selectMonth(8);
```

## 📝 更新日志

### v1.0.0 (2024-01-15)
- ✅ 初始版本发布
- ✅ 12个月份时间节点
- ✅ 数据联动更新功能
- ✅ 自动播放和控制功能
- ✅ 季节性数据变化模拟
- ✅ 响应式设计适配

---

**开发团队**: 农情遥感系统开发组  
**最后更新**: 2024-01-15  
**版本**: v1.0.0
