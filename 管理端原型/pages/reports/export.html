<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®å¯¼å‡º - å†œæƒ…é¥æ„Ÿç³»ç»Ÿç®¡ç†ç«¯</title>
    <link rel="stylesheet" href="../../assets/css/common.css">
    <link rel="stylesheet" href="../../assets/css/reports.css">
    <link rel="stylesheet" href="../../assets/css/export.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- å¯¼èˆªä¿®å¤æ ·å¼ -->
    <style>
    .nav-group .nav-item {
        cursor: pointer !important;
        user-select: none;
    }
    
    .nav-submenu {
        overflow: hidden !important;
        transition: max-height 0.3s ease !important;
        display: block !important;
    }
    
    .nav-group.expanded .nav-submenu {
        max-height: 300px !important;
    }
    
    .nav-group:not(.expanded) .nav-submenu {
        max-height: 0 !important;
    }
    
    .nav-subitem.active {
        background-color: rgba(255, 255, 255, 0.1) !important;
        color: #4CAF50 !important;
    }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <header class="header">
        <div class="header-left">
            <div class="logo">
                <i class="fas fa-seedling"></i>
                <span class="logo-text">å†œæƒ…é¥æ„Ÿç®¡ç†ç³»ç»Ÿ</span>
            </div>
        </div>
        
        <div class="header-center">
            <div class="breadcrumb">
                <i class="fas fa-home"></i>
                <span>ç»Ÿè®¡æŠ¥è¡¨</span>
                <i class="fas fa-chevron-right"></i>
                <span>æ•°æ®å¯¼å‡º</span>
            </div>
        </div>
        
        <div class="header-right">
            <div class="search-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" placeholder="æœç´¢æŠ¥è¡¨...">
            </div>
            
            <div class="header-time">
                <i class="fas fa-clock"></i>
                <span id="current-time">2024-01-15 14:30:25</span>
            </div>
            
            <div class="user-menu">
                <div class="user-avatar" onclick="toggleUserMenu()">
                    <i class="fas fa-user"></i>
                    <span class="user-name">ç®¡ç†å‘˜</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
                
                <div class="user-dropdown" id="userDropdown">
                    <a href="#" onclick="showUserProfile()">
                        <i class="fas fa-user-circle"></i>
                        ä¸ªäººä¿¡æ¯
                    </a>
                    <a href="#" onclick="showSystemSettings()">
                        <i class="fas fa-cog"></i>
                        ç³»ç»Ÿè®¾ç½®
                    </a>
                    <a href="#" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i>
                        é€€å‡ºç™»å½•
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- ä¾§è¾¹æ å¯¼èˆª -->
    <aside class="sidebar" id="sidebar">
        <nav class="nav-menu">
            <!-- ä»ªè¡¨æ¿ -->
            <div class="nav-item" onclick="window.location.href='../../index.html'">
                <i class="nav-icon fas fa-tachometer-alt"></i>
                <span class="nav-text">ä»ªè¡¨æ¿</span>
            </div>
            
            <!-- æ•°æ®ç®¡ç† -->
            <div class="nav-group">
                <div class="nav-item">
                    <i class="nav-icon fas fa-database"></i>
                    <span class="nav-text">æ•°æ®ç®¡ç†</span>
                    <i class="nav-arrow fas fa-chevron-right"></i>
                </div>
                <div class="nav-submenu">
                    <a href="../data-management/remote-sensing.html" class="nav-subitem">
                        <i class="fas fa-satellite"></i>
                        é¥æ„Ÿæ•°æ®ç®¡ç†
                    </a>
                    <a href="../data-management/weather-data.html" class="nav-subitem">
                        <i class="fas fa-cloud-sun"></i>
                        æ°”è±¡æ•°æ®ç®¡ç†
                    </a>
                    <a href="../data-management/crop-data.html" class="nav-subitem">
                        <i class="fas fa-seedling"></i>
                        ä½œç‰©æ•°æ®ç®¡ç†
                    </a>
                    <a href="../data-management/gis-data.html" class="nav-subitem">
                        <i class="fas fa-map"></i>
                        åœ°ç†æ•°æ®ç®¡ç†
                    </a>
                </div>
            </div>
            
            <!-- è®¾å¤‡ç®¡ç† -->
            <div class="nav-group">
                <div class="nav-item">
                    <i class="nav-icon fas fa-microchip"></i>
                    <span class="nav-text">è®¾å¤‡ç®¡ç†</span>
                    <i class="nav-arrow fas fa-chevron-right"></i>
                </div>
                <div class="nav-submenu">
                    <a href="../device-management/sensors.html" class="nav-subitem">
                        <i class="fas fa-thermometer-half"></i>
                        ä¼ æ„Ÿå™¨ç®¡ç†
                    </a>
                    <a href="../device-management/device-monitoring.html" class="nav-subitem">
                        <i class="fas fa-video"></i>
                        ç›‘æ§è®¾å¤‡
                    </a>
                    <a href="../device-management/maintenance.html" class="nav-subitem">
                        <i class="fas fa-tools"></i>
                        è®¾å¤‡ç»´æŠ¤
                    </a>
                </div>
            </div>
            
            <!-- ç”¨æˆ·ç®¡ç† -->
            <div class="nav-group">
                <div class="nav-item">
                    <i class="nav-icon fas fa-users"></i>
                    <span class="nav-text">ç”¨æˆ·ç®¡ç†</span>
                    <i class="nav-arrow fas fa-chevron-right"></i>
                </div>
                <div class="nav-submenu">
                    <a href="../user-management/users.html" class="nav-subitem">
                        <i class="fas fa-user"></i>
                        ç”¨æˆ·è´¦æˆ·
                    </a>
                    <a href="../user-management/roles.html" class="nav-subitem">
                        <i class="fas fa-user-tag"></i>
                        è§’è‰²æƒé™
                    </a>
                    <a href="../user-management/logs.html" class="nav-subitem">
                        <i class="fas fa-history"></i>
                        æ“ä½œæ—¥å¿—
                    </a>
                </div>
            </div>
            
            <!-- ç³»ç»Ÿè®¾ç½® -->
            <div class="nav-group">
                <div class="nav-item">
                    <i class="nav-icon fas fa-cogs"></i>
                    <span class="nav-text">ç³»ç»Ÿè®¾ç½®</span>
                    <i class="nav-arrow fas fa-chevron-right"></i>
                </div>
                <div class="nav-submenu">
                    <a href="../system-settings/display.html" class="nav-subitem">
                        <i class="fas fa-desktop"></i>
                        å¤§å±é…ç½®
                    </a>
                    <a href="../system-settings/algorithms.html" class="nav-subitem">
                        <i class="fas fa-brain"></i>
                        ç®—æ³•å‚æ•°
                    </a>
                    <a href="../system-settings/system-monitoring.html" class="nav-subitem">
                        <i class="fas fa-heartbeat"></i>
                        ç³»ç»Ÿç›‘æ§
                    </a>
                </div>
            </div>
            
            <!-- ç»Ÿè®¡æŠ¥è¡¨ -->
            <div class="nav-group expanded">
                <div class="nav-item">
                    <i class="nav-icon fas fa-chart-line"></i>
                    <span class="nav-text">ç»Ÿè®¡æŠ¥è¡¨</span>
                    <i class="nav-arrow fas fa-chevron-right"></i>
                </div>
                <div class="nav-submenu">
                    <a href="data-quality.html" class="nav-subitem">
                        <i class="fas fa-chart-bar"></i>
                        æ•°æ®è´¨é‡æŠ¥å‘Š
                    </a>
                    <a href="business.html" class="nav-subitem">
                        <i class="fas fa-chart-pie"></i>
                        ä¸šåŠ¡ç»Ÿè®¡
                    </a>
                    <a href="export.html" class="nav-subitem active">
                        <i class="fas fa-download"></i>
                        æ•°æ®å¯¼å‡º
                    </a>
                </div>
            </div>
        </nav>
    </aside>
    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <main class="main-content">
        <!-- é¡µé¢å†…å®¹ -->
        <div class="content-wrapper">
            <div class="page-header">
                <div class="page-title">
                    <h1>
                        <i class="fas fa-download"></i>
                        æ•°æ®å¯¼å‡º
                    </h1>
                    <p class="page-description">çµæ´»é…ç½®æ•°æ®å¯¼å‡ºå‚æ•°ï¼Œæ”¯æŒå¤šç§æ ¼å¼å’Œè‡ªå®šä¹‰ç­›é€‰æ¡ä»¶</p>
                </div>
                <div class="page-actions">
                    <button class="btn btn-secondary" id="templateBtn">
                        <i class="fas fa-file-alt"></i>
                        å¯¼å‡ºæ¨¡æ¿
                    </button>
                    <button class="btn btn-primary" id="quickExportBtn">
                        <i class="fas fa-bolt"></i>
                        å¿«é€Ÿå¯¼å‡º
                    </button>
                </div>
            </div>
            <!-- å¯¼å‡ºé…ç½® -->
            <div class="content-grid">
                <!-- æ•°æ®æºé€‰æ‹© -->
                <div class="content-card">
                    <div class="card-header">
                        <h3>
                            <i class="fas fa-database"></i>
                            æ•°æ®æºé€‰æ‹©
                        </h3>
                        <div class="card-actions">
                            <button class="btn btn-ghost btn-sm" id="selectAllSources">
                                <i class="fas fa-check-square"></i>
                                å…¨é€‰
                            </button>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="data-sources">
                            <div class="source-group">
                                <label class="source-category">
                                    <input type="checkbox" id="remoteSensingCategory" checked>
                                    <i class="fas fa-satellite"></i>
                                    <span>é¥æ„Ÿæ•°æ®</span>
                                </label>
                                <div class="source-items">
                                    <label class="source-item">
                                        <input type="checkbox" name="dataSource" value="landsat" checked>
                                        <span>Landsatå½±åƒæ•°æ®</span>
                                        <small>1,247æ¡è®°å½•</small>
                                    </label>
                                    <label class="source-item">
                                        <input type="checkbox" name="dataSource" value="sentinel">
                                        <span>Sentinel-2æ•°æ®</span>
                                        <small>892æ¡è®°å½•</small>
                                    </label>
                                    <label class="source-item">
                                        <input type="checkbox" name="dataSource" value="modis">
                                        <span>MODISæ•°æ®</span>
                                        <small>1,567æ¡è®°å½•</small>
                                    </label>
                                </div>
                            </div>
                            <div class="source-group">
                                <label class="source-category">
                                    <input type="checkbox" id="weatherCategory">
                                    <i class="fas fa-cloud-sun"></i>
                                    <span>æ°”è±¡æ•°æ®</span>
                                </label>
                                <div class="source-items">
                                    <label class="source-item">
                                        <input type="checkbox" name="dataSource" value="temperature">
                                        <span>æ¸©åº¦æ•°æ®</span>
                                        <small>2,156æ¡è®°å½•</small>
                                    </label>
                                    <label class="source-item">
                                        <input type="checkbox" name="dataSource" value="precipitation">
                                        <span>é™æ°´æ•°æ®</span>
                                        <small>1,890æ¡è®°å½•</small>
                                    </label>
                                    <label class="source-item">
                                        <input type="checkbox" name="dataSource" value="humidity">
                                        <span>æ¹¿åº¦æ•°æ®</span>
                                        <small>1,678æ¡è®°å½•</small>
                                    </label>
                                </div>
                            </div>
                            <div class="source-group">
                                <label class="source-category">
                                    <input type="checkbox" id="sensorCategory">
                                    <i class="fas fa-microchip"></i>
                                    <span>ä¼ æ„Ÿå™¨æ•°æ®</span>
                                </label>
                                <div class="source-items">
                                    <label class="source-item">
                                        <input type="checkbox" name="dataSource" value="soil">
                                        <span>åœŸå£¤ä¼ æ„Ÿå™¨</span>
                                        <small>3,245æ¡è®°å½•</small>
                                    </label>
                                    <label class="source-item">
                                        <input type="checkbox" name="dataSource" value="camera">
                                        <span>ç›‘æ§æ‘„åƒå¤´</span>
                                        <small>1,234æ¡è®°å½•</small>
                                    </label>
                                </div>
                            </div>
                            <div class="source-group">
                                <label class="source-category">
                                    <input type="checkbox" id="cropCategory">
                                    <i class="fas fa-seedling"></i>
                                    <span>ä½œç‰©æ•°æ®</span>
                                </label>
                                <div class="source-items">
                                    <label class="source-item">
                                        <input type="checkbox" name="dataSource" value="growth">
                                        <span>ç”Ÿé•¿ç›‘æµ‹æ•°æ®</span>
                                        <small>1,567æ¡è®°å½•</small>
                                    </label>
                                    <label class="source-item">
                                        <input type="checkbox" name="dataSource" value="yield">
                                        <span>äº§é‡é¢„ä¼°æ•°æ®</span>
                                        <small>892æ¡è®°å½•</small>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- å¯¼å‡ºé…ç½® -->
                <div class="content-card">
                    <div class="card-header">
                        <h3>
                            <i class="fas fa-cog"></i>
                            å¯¼å‡ºé…ç½®
                        </h3>
                    </div>
                    <div class="card-content">
                        <div class="config-form">
                            <div class="form-group">
                                <label>å¯¼å‡ºæ ¼å¼</label>
                                <div class="format-options">
                                    <label class="format-option">
                                        <input type="radio" name="exportFormat" value="excel" checked>
                                        <div class="format-card">
                                            <i class="fas fa-file-excel"></i>
                                            <span>Excel (.xlsx)</span>
                                            <small>é€‚åˆæ•°æ®åˆ†æ</small>
                                        </div>
                                    </label>
                                    <label class="format-option">
                                        <input type="radio" name="exportFormat" value="csv">
                                        <div class="format-card">
                                            <i class="fas fa-file-csv"></i>
                                            <span>CSV (.csv)</span>
                                            <small>é€šç”¨æ•°æ®æ ¼å¼</small>
                                        </div>
                                    </label>
                                    <label class="format-option">
                                        <input type="radio" name="exportFormat" value="json">
                                        <div class="format-card">
                                            <i class="fas fa-file-code"></i>
                                            <span>JSON (.json)</span>
                                            <small>ç¨‹åºæ¥å£æ ¼å¼</small>
                                        </div>
                                    </label>
                                    <label class="format-option">
                                        <input type="radio" name="exportFormat" value="pdf">
                                        <div class="format-card">
                                            <i class="fas fa-file-pdf"></i>
                                            <span>PDF (.pdf)</span>
                                            <small>æŠ¥è¡¨æ–‡æ¡£æ ¼å¼</small>
                                        </div>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="exportName">æ–‡ä»¶åç§°</label>
                                <input type="text" id="exportName" class="form-input" 
                                       value="å†œæƒ…é¥æ„Ÿæ•°æ®å¯¼å‡º" placeholder="è¯·è¾“å…¥æ–‡ä»¶åç§°">
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="startDate">å¼€å§‹æ—¥æœŸ</label>
                                    <input type="date" id="startDate" class="form-input">
                                </div>
                                <div class="form-group">
                                    <label for="endDate">ç»“æŸæ—¥æœŸ</label>
                                    <input type="date" id="endDate" class="form-input">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="regionFilter">åŒºåŸŸç­›é€‰</label>
                                <select id="regionFilter" class="form-select">
                                    <option value="all">å…¨éƒ¨åŒºåŸŸ</option>
                                    <option value="north">åŒ—éƒ¨åœ°åŒº</option>
                                    <option value="south">å—éƒ¨åœ°åŒº</option>
                                    <option value="east">ä¸œéƒ¨åœ°åŒº</option>
                                    <option value="west">è¥¿éƒ¨åœ°åŒº</option>
                                    <option value="center">ä¸­éƒ¨åœ°åŒº</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>æ•°æ®è´¨é‡</label>
                                <div class="quality-filters">
                                    <label class="quality-filter">
                                        <input type="checkbox" value="excellent" checked>
                                        <span class="quality-badge excellent">ä¼˜ç§€</span>
                                    </label>
                                    <label class="quality-filter">
                                        <input type="checkbox" value="good" checked>
                                        <span class="quality-badge good">è‰¯å¥½</span>
                                    </label>
                                    <label class="quality-filter">
                                        <input type="checkbox" value="warning">
                                        <span class="quality-badge warning">è­¦å‘Š</span>
                                    </label>
                                    <label class="quality-filter">
                                        <input type="checkbox" value="error">
                                        <span class="quality-badge error">å¼‚å¸¸</span>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="includeMetadata" checked>
                                    <span>åŒ…å«å…ƒæ•°æ®ä¿¡æ¯</span>
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="compressFile">
                                    <span>å‹ç¼©æ–‡ä»¶ (ZIPæ ¼å¼)</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- å¯¼å‡ºé¢„è§ˆ -->
                <div class="content-card full-width">
                    <div class="card-header">
                        <h3>
                            <i class="fas fa-eye"></i>
                            å¯¼å‡ºé¢„è§ˆ
                        </h3>
                        <div class="card-actions">
                            <span class="preview-count">é¢„è®¡å¯¼å‡º <strong id="previewCount">1,247</strong> æ¡è®°å½•</span>
                            <button class="btn btn-ghost btn-sm" id="refreshPreview">
                                <i class="fas fa-sync-alt"></i>
                                åˆ·æ–°é¢„è§ˆ
                            </button>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="preview-container">
                            <div class="preview-tabs">
                                <button class="preview-tab active" data-tab="table">è¡¨æ ¼é¢„è§ˆ</button>
                                <button class="preview-tab" data-tab="structure">æ•°æ®ç»“æ„</button>
                                <button class="preview-tab" data-tab="statistics">ç»Ÿè®¡ä¿¡æ¯</button>
                            </div>
                            <div class="preview-content">
                                <div class="preview-pane active" id="tablePreview">
                                    <div class="table-container">
                                        <table class="preview-table">
                                            <thead>
                                                <tr>
                                                    <th>æ•°æ®æº</th>
                                                    <th>æ—¶é—´</th>
                                                    <th>åŒºåŸŸ</th>
                                                    <th>æ•°å€¼</th>
                                                    <th>è´¨é‡ç­‰çº§</th>
                                                </tr>
                                            </thead>
                                            <tbody id="previewTableBody">
                                                <!-- é¢„è§ˆæ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="preview-pane" id="structurePreview">
                                    <div class="structure-tree" id="structureTree">
                                        <!-- æ•°æ®ç»“æ„å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                                    </div>
                                </div>
                                <div class="preview-pane" id="statisticsPreview">
                                    <div class="statistics-grid" id="statisticsGrid">
                                        <!-- ç»Ÿè®¡ä¿¡æ¯å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- å¯¼å‡ºä»»åŠ¡åˆ—è¡¨ -->
                <div class="content-card full-width">
                    <div class="card-header">
                        <h3>
                            <i class="fas fa-tasks"></i>
                            å¯¼å‡ºä»»åŠ¡åˆ—è¡¨
                        </h3>
                        <div class="card-actions">
                            <button class="btn btn-ghost btn-sm" id="clearCompletedTasks">
                                <i class="fas fa-trash"></i>
                                æ¸…ç†å·²å®Œæˆ
                            </button>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="tasks-container" id="tasksContainer">
                            <!-- å¯¼å‡ºä»»åŠ¡å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- å¯¼å‡ºæ“ä½œåŒºåŸŸ -->
            <div class="export-actions">
                <div class="export-summary">
                    <div class="summary-item">
                        <span class="summary-label">é€‰ä¸­æ•°æ®æºï¼š</span>
                        <span class="summary-value" id="selectedSources">1ä¸ª</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">é¢„è®¡è®°å½•æ•°ï¼š</span>
                        <span class="summary-value" id="estimatedRecords">1,247æ¡</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">é¢„è®¡æ–‡ä»¶å¤§å°ï¼š</span>
                        <span class="summary-value" id="estimatedSize">2.5MB</span>
                    </div>
                </div>
                <div class="export-buttons">
                    <button class="btn btn-secondary" id="saveTemplateBtn">
                        <i class="fas fa-save"></i>
                        ä¿å­˜æ¨¡æ¿
                    </button>
                    <button class="btn btn-warning" id="previewExportBtn">
                        <i class="fas fa-eye"></i>
                        é¢„è§ˆå¯¼å‡º
                    </button>
                    <button class="btn btn-primary" id="startExportBtn">
                        <i class="fas fa-download"></i>
                        å¼€å§‹å¯¼å‡º
                    </button>
                </div>
            </div>
        </div>
    </main>
    <!-- å¯¼å‡ºè¿›åº¦æ¨¡æ€æ¡† -->
    <div class="modal-overlay" id="exportProgressModal">
        <div class="modal-content medium">
            <div class="modal-header">
                <h3>æ•°æ®å¯¼å‡ºè¿›åº¦</h3>
                <button class="modal-close" id="closeProgressModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="export-progress">
                    <div class="progress-info">
                        <div class="progress-title" id="progressTitle">æ­£åœ¨å‡†å¤‡å¯¼å‡º...</div>
                        <div class="progress-details" id="progressDetails">æ­£åœ¨åˆå§‹åŒ–å¯¼å‡ºä»»åŠ¡</div>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                        </div>
                        <div class="progress-text" id="progressText">0%</div>
                    </div>
                    <div class="progress-stats">
                        <div class="stat-item">
                            <span class="stat-label">å·²å¤„ç†ï¼š</span>
                            <span class="stat-value" id="processedCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">æ€»è®¡ï¼š</span>
                            <span class="stat-value" id="totalCount">1,247</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">å‰©ä½™æ—¶é—´ï¼š</span>
                            <span class="stat-value" id="remainingTime">--</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="pauseExportBtn">
                    <i class="fas fa-pause"></i>
                    æš‚åœ
                </button>
                <button class="btn btn-danger" id="cancelExportBtn">
                    <i class="fas fa-stop"></i>
                    å–æ¶ˆ
                </button>
            </div>
        </div>
    </div>
    <!-- æ¨¡æ¿ä¿å­˜æ¨¡æ€æ¡† -->
    <div class="modal-overlay" id="templateModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ä¿å­˜å¯¼å‡ºæ¨¡æ¿</h3>
                <button class="modal-close" id="closeTemplateModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="templateName">æ¨¡æ¿åç§°</label>
                    <input type="text" id="templateName" class="form-input" 
                           placeholder="è¯·è¾“å…¥æ¨¡æ¿åç§°">
                </div>
                <div class="form-group">
                    <label for="templateDescription">æ¨¡æ¿æè¿°</label>
                    <textarea id="templateDescription" class="form-textarea" 
                              placeholder="è¯·è¾“å…¥æ¨¡æ¿æè¿°ï¼ˆå¯é€‰ï¼‰"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelTemplateBtn">å–æ¶ˆ</button>
                <button class="btn btn-primary" id="saveTemplateConfirmBtn">ä¿å­˜</button>
            </div>
        </div>
    </div>
    <!-- é€šçŸ¥å®¹å™¨ -->
    <div class="notification-container" id="notificationContainer"></div>
    <!-- JavaScriptæ–‡ä»¶ -->
    <script src="../../assets/js/common.js"></script>
    <script src="../../assets/js/data-export.js"></script>
    
    <!-- å¯¼èˆªä¿®å¤è„šæœ¬ - æ•°æ®å¯¼å‡ºé¡µé¢ -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        console.log('ğŸ“¤ æ•°æ®å¯¼å‡ºé¡µé¢ - ç®€åŒ–å¯¼èˆªä¿®å¤');
        
        // ç®€å•ç›´æ¥çš„å¯¼èˆªä¿®å¤
        setTimeout(() => {
            // 1. ä¿®å¤æ—¶é—´æ˜¾ç¤º
            const currentTimeEl = document.getElementById('current-time');
            if (currentTimeEl) {
                const updateTime = () => {
                    const now = new Date();
                    currentTimeEl.textContent = now.toLocaleString('zh-CN');
                };
                updateTime();
                setInterval(updateTime, 1000);
            }
            
            // 2. å¼ºåˆ¶å¯¼èˆªä¿®å¤ - ç›´æ¥æ“ä½œ
            const navGroups = document.querySelectorAll('.nav-group');
            console.log(`æ‰¾åˆ° ${navGroups.length} ä¸ªå¯¼èˆªç»„`);
            
            navGroups.forEach((group, index) => {
                const navItem = group.querySelector('.nav-item');
                const submenu = group.querySelector('.nav-submenu');
                const navText = group.querySelector('.nav-text')?.textContent || `ç»„${index+1}`;
                
                if (navItem && submenu) {
                    console.log(`å¤„ç†å¯¼èˆªç»„: ${navText}`);
                    
                    // å¼ºåˆ¶è®¾ç½®æ ·å¼
                    submenu.style.overflow = 'hidden';
                    submenu.style.transition = 'max-height 0.3s ease';
                    submenu.style.display = 'block';
                    navItem.style.cursor = 'pointer';
                    navItem.style.userSelect = 'none';
                    
                    // è®¾ç½®åˆå§‹çŠ¶æ€
                    if (group.classList.contains('expanded')) {
                        submenu.style.maxHeight = '500px';
                        console.log(`âœ“ ${navText} åˆå§‹å±•å¼€`);
                    } else {
                        submenu.style.maxHeight = '0px';
                        console.log(`- ${navText} åˆå§‹æ”¶èµ·`);
                    }
                    
                    // ç§»é™¤æ—§äº‹ä»¶ï¼Œæ·»åŠ æ–°äº‹ä»¶
                    navItem.onclick = null;
                    navItem.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log(`ğŸ–±ï¸ ç‚¹å‡»å¯¼èˆªç»„: ${navText}`);
                        
                        const isCurrentlyExpanded = group.classList.contains('expanded');
                        
                        if (isCurrentlyExpanded) {
                            group.classList.remove('expanded');
                            submenu.style.maxHeight = '0px';
                            console.log(`ğŸ“ ${navText} å·²æ”¶èµ·`);
                        } else {
                            group.classList.add('expanded');
                            submenu.style.maxHeight = '500px';
                            console.log(`ğŸ“‚ ${navText} å·²å±•å¼€`);
                        }
                    });
                    
                    console.log(`âœ… å¯¼èˆªç»„ "${navText}" äº‹ä»¶ç»‘å®šå®Œæˆ`);
                }
            });
            
            // 3. é«˜äº®å½“å‰é¡µé¢
            const currentItem = document.querySelector('a[href="export.html"]');
            if (currentItem) {
                currentItem.classList.add('active');
                console.log('âœ“ æ•°æ®å¯¼å‡ºé¡µé¢å·²é«˜äº®');
            }
            
            console.log('âœ… æ•°æ®å¯¼å‡ºé¡µé¢å¯¼èˆªä¿®å¤å®Œæˆ');
        }, 100);
    });
    </script>
</body>
</html>
